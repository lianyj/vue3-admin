var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,d=(a,l,o)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[l]=o;import{_ as s}from"./element-plus.392249c9.js";import"./vue.6371db79.js";import"./index.5b6ae43b.js";import{u as n}from"./vue-router.b8b6d224.js";import{z as i,m as p,K as u,a8 as m,a9 as c,P as g,R as b,o as f,d as h,N as y,l as j,u as S,aa as _,U as k}from"./@vue.07e3533d.js";import{a as w}from"./axios.6127bb87.js";import"./dayjs.2a17732a.js";import"./lodash.ebb3c926.js";import"./mitt.33133208.js";import"./async-validator.e3a73323.js";import"./@popperjs.6ab8fae4.js";import"./resize-observer-polyfill.06552ccc.js";import"./normalize-wheel.d56ec257.js";import"./@sentry.2890fdbd.js";import"./tslib.e2371a99.js";const v={name:"Good",setup(){const e=n(),m=i({formModel:{goodsName:"",tag:"",goodsSellStatus:null},loading:!1,tableData:[],total:0,currentPage:1,pageSize:10});p((()=>{c()}));const c=()=>{m.loading=!0,w.get("/goods/list",{params:{pageNumber:m.currentPage,pageSize:m.pageSize,goodsName:m.formModel.goodsName,tag:m.formModel.tag,goodsSellStatus:m.formModel.goodsSellStatus}}).then((e=>{m.tableData=e.list,m.total=e.totalCount,m.currentPage=e.currPage,m.loading=!1}))};return g=((e,a)=>{for(var l in a||(a={}))t.call(a,l)&&d(e,l,a[l]);if(o)for(var l of o(a))r.call(a,l)&&d(e,l,a[l]);return e})({},u(m)),a(g,l({handleAdd:()=>{e.push({path:"/add"})},handleEdit:a=>{e.push({path:"/add",query:{id:a}})},getGoodList:c,changePage:e=>{m.currentPage=e,c()},handleStatus:(e,a)=>{w.put(`/goods/status/${a}`,{ids:e?[e]:[]}).then((()=>{s.success("修改成功"),c()}))}}));var g}},M=_("data-v-1e078d77");m("data-v-1e078d77");const C={class:"header"},P=k("上架"),z=k("下架"),V=k("搜索"),x=k("新增商品"),N={style:{color:"green"}},O=y("br",null,null,-1),I={style:{color:"red"}},U={key:0,style:{color:"green"}},D={key:1,style:{color:"red"}};c();const E=M(((e,a,l,o,t,r)=>{const d=g("el-input"),s=g("el-form-item"),n=g("el-option"),i=g("el-select"),p=g("el-button"),u=g("el-form"),m=g("el-table-column"),c=g("el-row"),_=g("el-table"),k=g("el-pagination"),w=g("el-card"),v=b("loading");return f(),h(w,{class:"good-container"},{header:M((()=>[y("div",C,[y(u,{size:"mini",inline:"",modelValue:e.formModel,"onUpdate:modelValue":a[4]||(a[4]=a=>e.formModel=a),style:{width:"100%","font-size":"12px"}},{default:M((()=>[y(s,{label:"商品名称"},{default:M((()=>[y(d,{placeholder:"商品名称",modelValue:e.formModel.goodsName,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formModel.goodsName=a),clearable:""},null,8,["modelValue"])])),_:1}),y(s,{label:"上架状态"},{default:M((()=>[y(i,{placeholder:"上架状态",modelValue:e.formModel.goodsSellStatus,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formModel.goodsSellStatus=a),clearable:""},{default:M((()=>[y(n,{label:"上架",value:"0"},{default:M((()=>[P])),_:1}),y(n,{label:"下架",value:"1"},{default:M((()=>[z])),_:1})])),_:1},8,["modelValue"])])),_:1}),y(s,{label:"标签"},{default:M((()=>[y(d,{placeholder:"标签",modelValue:e.formModel.tag,"onUpdate:modelValue":a[3]||(a[3]=a=>e.formModel.tag=a),clearable:""},null,8,["modelValue"])])),_:1}),y(p,{size:"mini",type:"primary",onClick:o.getGoodList},{default:M((()=>[V])),_:1},8,["onClick"]),y(p,{size:"mini",type:"danger",onClick:o.handleAdd},{default:M((()=>[x])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])])),default:M((()=>[j(y(_,{data:e.tableData,"tooltip-effect":"dark",style:{width:"100%"}},{default:M((()=>[y(m,{prop:"goodsId",label:"产品编号"}),y(m,{prop:"goodsName",label:"产品名称"}),y(m,{label:"规格型号"},{default:M((e=>[y(c,null,{default:M((()=>[y("span",N,"球镜："+S(e.row.sphereMin)+" 至 "+S(e.row.sphereMax),1)])),_:2},1024),O,y(c,null,{default:M((()=>[y("span",I,"柱镜："+S(e.row.cylinderMin)+" 至 "+S(e.row.cylinderMax),1)])),_:2},1024)])),_:1}),y(m,{prop:"stockNum",label:"商品库存"}),y(m,{prop:"originalPrice",label:"标批价格"}),y(m,{prop:"remark",label:"备注"}),y(m,{prop:"tag",label:"标签"}),y(m,{label:"上架状态"},{default:M((e=>[0===e.row.goodsSellStatus?(f(),h("span",U,"销售中")):(f(),h("span",D,"已下架"))])),_:1}),y(m,{label:"操作",width:"100"},{default:M((e=>[y("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:a=>o.handleEdit(e.row.goodsId)},"修改",8,["onClick"]),0===e.row.goodsSellStatus?(f(),h("a",{key:0,style:{cursor:"pointer","margin-right":"10px"},onClick:a=>o.handleStatus(e.row.goodsId,1)},"下架",8,["onClick"])):(f(),h("a",{key:1,style:{cursor:"pointer","margin-right":"10px"},onClick:a=>o.handleStatus(e.row.goodsId,0)},"上架",8,["onClick"]))])),_:1})])),_:1},8,["data"]),[[v,e.loading]]),y(k,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage,onCurrentChange:o.changePage},null,8,["total","page-size","current-page","onCurrentChange"])])),_:1})}));v.render=E,v.__scopeId="data-v-1e078d77";export{v as default};
